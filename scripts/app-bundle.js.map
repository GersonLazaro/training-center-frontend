{"version":3,"sources":["app.js","environment.js","main.js","config/config.js","models/user.js","resources/index.js","services/auth.js","services/http.js","modules/error-404/error-404.js","modules/home/home.js","modules/login/login.js","modules/recovery/recovery-password.js","modules/recovery/reset-password.js","modules/signin/signin.js","resources/elements/loading-indicator.js","services/jwt.js"],"names":["App","configureRouter","config","router","title","options","pushState","root","addPipelineStep","AuthorizeStep","map","name","route","moduleId","layoutView","settings","roles","inject","authService","run","navigationInstruction","next","getAllInstructions","some","i","indexOf","isAdmin","isCoach","isStudent","isVisitor","cancel","debug","testing","configure","Promise","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","CONFIG","apiUrl","endponts","auth","tokenName","User","email","password","repassword","username","code","globalResources","Auth","jwtService","user","httpClient","fetch","method","body","response","json","authorization","save","token","navigate","logout","window","localStorage","isAuthenticated","getUserType","Http","useStandardConfiguration","withBaseUrl","Error404","Home","Login","authorizationService","login","RecoveryPassword","requestRecovery","ResetPassword","requestResetPassword","Signin","nprogress","LoadingIndicator","defaultValue","on","loadingChanged","newValue","done","Jwt","getItem","tokenExists","data","JSON","parse","atob","split","setItem","stringify","remove","removeItem","getUsername","getUserId","sub","type","usertype"],"mappings":";;;;;;;;;;;;;;MAIaA,cAAAA;;;;;kBACXC,2CAAiBC,QAAQC,QAAQ;AAC/BD,aAAOE,KAAP,GAAe,sBAAf;AACAF,aAAOG,OAAP,CAAeC,SAAf,GAA2B,IAA3B;AACAJ,aAAOG,OAAP,CAAeE,IAAf,GAAsB,GAAtB;AACAL,aAAOM,eAAP,CAAuB,WAAvB,EAAoCC,aAApC;AACAP,aAAOQ,GAAP,CAAW,CAET;AACEC,cAAM,OADR;AAEEC,eAAO,gBAFT;AAGEC,kBAAU,uBAHZ;AAIET,eAAO,gBAJT;AAKEU,oBAAY,2BALd;AAMEC,kBAAU;AACRC,iBAAO,CAAC,SAAD;AADC;AANZ,OAFS,EAaT;AACEL,cAAM,QADR;AAEEC,eAAO,UAFT;AAGEC,kBAAU,yBAHZ;AAIET,eAAO,YAJT;AAKEU,oBAAY,2BALd;AAMEC,kBAAU;AACRC,iBAAO,CAAC,SAAD;AADC;AANZ,OAbS,EAwBT;AACEL,cAAM,mBADR;AAEEC,eAAO,oBAFT;AAGEC,kBAAU,sCAHZ;AAIET,eAAO,sBAJT;AAKEU,oBAAY,2BALd;AAMEC,kBAAU;AACRC,iBAAO,CAAC,SAAD;AADC;AANZ,OAxBS,EAmCT;AACEL,cAAM,gBADR;AAEEC,eAAO,kBAFT;AAGEC,kBAAU,mCAHZ;AAIET,eAAO,sBAJT;AAKEU,oBAAY,2BALd;AAMEC,kBAAU;AACRC,iBAAO,CAAC,SAAD;AADC;AANZ,OAnCS,EA8CT;AACEL,cAAM,MADR;AAEEC,eAAO,EAFT;AAGEC,kBAAU,qBAHZ;AAIEE,kBAAU;AACRC,iBAAO,CAAC,OAAD,EAAU,OAAV,EAAmB,SAAnB;AADC;AAJZ,OA9CS,CAAX;AAuDA,WAAKb,MAAL,GAAcA,MAAd;AACD;;;;;MAGGM;kBACGQ,2BAAU;AACf,aAAO,YAAP;AACD;;AAED,2BAAaC,WAAb,EAA0B;AAAA;;AACxB,WAAKA,WAAL,GAAmBA,WAAnB;AACD;;4BACDC,mBAAKC,uBAAuBC,MAAM;AAChC,UAAID,sBAAsBE,kBAAtB,GAA2CC,IAA3C,CAAgD;AAAA,eAAKC,EAAEtB,MAAF,CAASa,QAAT,CAAkBC,KAAlB,CAAwBS,OAAxB,CAAgC,OAAhC,MAA6C,CAAC,CAAnD;AAAA,OAAhD,CAAJ,EAA2G;AACzG,YAAI,KAAKP,WAAL,CAAiBQ,OAAjB,EAAJ,EAAgC;AAC9B,iBAAOL,MAAP;AACD;AACF;AACD,UAAID,sBAAsBE,kBAAtB,GAA2CC,IAA3C,CAAgD;AAAA,eAAKC,EAAEtB,MAAF,CAASa,QAAT,CAAkBC,KAAlB,CAAwBS,OAAxB,CAAgC,OAAhC,MAA6C,CAAC,CAAnD;AAAA,OAAhD,CAAJ,EAA2G;AACzG,YAAI,KAAKP,WAAL,CAAiBS,OAAjB,EAAJ,EAAgC;AAC9B,iBAAON,MAAP;AACD;AACF;AACD,UAAID,sBAAsBE,kBAAtB,GAA2CC,IAA3C,CAAgD;AAAA,eAAKC,EAAEtB,MAAF,CAASa,QAAT,CAAkBC,KAAlB,CAAwBS,OAAxB,CAAgC,SAAhC,MAA+C,CAAC,CAArD;AAAA,OAAhD,CAAJ,EAA6G;AAC3G,YAAI,KAAKP,WAAL,CAAiBU,SAAjB,EAAJ,EAAkC;AAChC,iBAAOP,MAAP;AACD;AACF;;AAED,UAAID,sBAAsBE,kBAAtB,GAA2CC,IAA3C,CAAgD;AAAA,eAAKC,EAAEtB,MAAF,CAASa,QAAT,CAAkBC,KAAlB,CAAwBS,OAAxB,CAAgC,SAAhC,MAA+C,CAAC,CAArD;AAAA,OAAhD,CAAJ,EAA6G;AAC3G,YAAI,CAAC,KAAKP,WAAL,CAAiBW,SAAjB,EAAL,EAAmC;AACjC,iBAAOR,KAAKS,MAAL,CAAY,4BAAa,EAAb,CAAZ,CAAP;AACD,SAFD,MAEO;AACL,iBAAOT,MAAP;AACD;AACF;AACD,UAAI,KAAKH,WAAL,CAAiBW,SAAjB,EAAJ,EAAkC;AAChC,eAAOR,KAAKS,MAAL,CAAY,4BAAa,gBAAb,CAAZ,CAAP;AACD,OAFD,MAEO;AACL,eAAOT,KAAKS,MAAL,CAAY,4BAAa,EAAb,CAAZ,CAAP;AACD;AACF;;;;;;;;;;;oBC1GY;AACbC,WAAO,IADM;AAEbC,aAAS;AAFI;;;;;;;;UCWCC,YAAAA;;;;;;;;;;AAPhBC,UAAQhC,MAAR,CAAe;AACbiC,qBAAiB,sBAAYJ,KADhB;AAEbK,cAAU;AACRC,wBAAkB;AADV;AAFG,GAAf;;AAOO,WAASJ,SAAT,CAAoBK,OAApB,EAA6B;AAClCA,YAAQC,GAAR,CACGC,qBADH,GAEGC,OAFH,CAEW,WAFX;;AAIA,QAAI,sBAAYV,KAAhB,EAAuB;AACrBO,cAAQC,GAAR,CAAYG,kBAAZ;AACD;;AAED,QAAI,sBAAYV,OAAhB,EAAyB;AACvBM,cAAQC,GAAR,CAAYI,MAAZ,CAAmB,iBAAnB;AACD;;AAEDL,YAAQM,KAAR,GAAgBC,IAAhB,CAAqB;AAAA,aAAMP,QAAQQ,OAAR,EAAN;AAAA,KAArB;AACD;;;;;;;;ACzBM,MAAIC,0BAAS;AAElBC,YAAQ,iCAFU;AAGlBC,cAAU;AACRC,YAAM;AADE,KAHQ;;AAQlBC,eAAW;AARO,GAAb;;;;;;;;;;;;;;;MCIMC,eAAAA,OAUX,gBAA0G;AAAA,QAA7FC,KAA6F,uEAArF,IAAqF;AAAA,QAA/EC,QAA+E,uEAApE,IAAoE;AAAA,QAA9DC,UAA8D,uEAAjD,IAAiD;AAAA,QAA3C5C,IAA2C,uEAApC,IAAoC;AAAA,QAA9B6C,QAA8B,uEAAnB,IAAmB;AAAA,QAAbC,IAAa,uEAAN,IAAM;;AAAA;;AACxG,SAAKJ,KAAL,GAAaA,KAAb;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKC,UAAL,GAAkBA,UAAlB;AACA,SAAK5C,IAAL,GAAYA,IAAZ;AACA,SAAK6C,QAAL,GAAgBA,QAAhB;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACD;;;;;;;;UCrBaxB,YAAAA;AAAT,WAASA,SAAT,CAAoB/B,MAApB,EAA4B;AACjCA,WAAOwD,eAAP,CAAuB,CAAC,8BAAD,CAAvB;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCGYC,eAAAA;;;SAEJ1C,2BAAU;AACf,aAAO,iCAAP;AACD;;AAED,kBAAad,MAAb,EAAqByD,UAArB,EAAiC;AAAA;;AAAA,mDAC/B,gBAD+B;;AAE/B,YAAKzD,MAAL,GAAcA,MAAd;AACA,YAAKyD,UAAL,GAAkBA,UAAlB;AAH+B;AAIhC;;mBACDV,qBAAMW,MAAM;AAAA;;AACV,WAAKC,UAAL,CACGC,KADH,CACS,eAAOd,QAAP,CAAgBC,IADzB,EAC+B;AAC3Bc,gBAAQ,MADmB;AAE3BC,cAAMJ;AAFqB,OAD/B,EAKGhB,IALH,CAKQ,UAACqB,QAAD;AAAA,eAAcA,SAASC,IAAT,EAAd;AAAA,OALR,EAMGtB,IANH,CAMQ,UAACuB,aAAD,EAAmB;AACvB,eAAKR,UAAL,CAAgBS,IAAhB,CAAqBD,cAAcE,KAAnC;AACA,eAAKnE,MAAL,CAAYoE,QAAZ,CAAqB,EAArB;AACD,OATH;AAUD;;mBAEDC,2BAAU;AACRC,aAAOC,YAAP,CAAoB,eAAOvB,SAA3B,IAAwC,IAAxC;AACA,WAAKiB,aAAL,GAAqB,IAArB;AACD;;mBAEDO,6CAAmB;AACjB,aAAO,KAAKP,aAAL,KAAuB,IAA9B;AACD;;mBAEDxC,iCAAa;AACX,aAAO,KAAKgC,UAAL,CAAgBgB,WAAhB,OAAkC,SAAzC;AACD;;mBAEDjD,6BAAW;AACT,aAAO,KAAKiC,UAAL,CAAgBgB,WAAhB,OAAkC,OAAzC;AACD;;mBAEDlD,6BAAW;AACT,aAAO,KAAKkC,UAAL,CAAgBgB,WAAhB,OAAkC,OAAzC;AACD;;mBAED/C,iCAAa;AACX,aAAO,KAAK+B,UAAL,CAAgBgB,WAAhB,OAAkC,SAAzC;AACD;;;;;;;;;;;;;;;;;;;MChDUC,eAAAA,OAEX,gBAAe;AAAA;;AACb,SAAKf,UAAL,GAAkB,oCAAlB;AACA,SAAKA,UAAL,CAAgB7B,SAAhB,CAA0B,kBAAU;AAClC/B,aACG4E,wBADH,GAEGC,WAFH,CAEe,eAAO/B,MAFtB;AAGD,KAJD;AAKD;;;;;;;;;;;;;;;MCbUgC,mBAAAA;;;;;;;;;;;;;;;;;MCCAC,eAAAA;;;;;;;;;;;;;;;;;;MCEAC,gBAAAA;UACJjE,2BAAU;AACf,aAAO,YAAP;AACD;;AACD,mBAAakE,oBAAb,EAAmC;AAAA;;AACjC,WAAKA,oBAAL,GAA4BA,oBAA5B;AACA,WAAKtB,IAAL,GAAY,gBAAZ;AACD;;oBACDuB,yBAAS;AACP,UAAI,KAAKvB,IAAL,CAAUR,KAAV,KAAoB,EAApB,IAA0B,KAAKQ,IAAL,CAAUP,QAAV,KAAuB,EAArD,EAAyD;AACvD,aAAK6B,oBAAL,CAA0BjC,IAA1B,CAA+B,KAAKW,IAApC;AACD;AACF;;;;;;;;;;;;;;;;;;MCfUwB,2BAAAA;AACX,gCAAe;AAAA;;AACb,WAAKhC,KAAL,GAAa,EAAb;AACD;;+BAEDiC,6CAAmB,CAElB;;;;;;;;;;;;;;;;;;;MCLUC,wBAAAA;AACX,6BAAe;AAAA;;AACb,WAAK1B,IAAL,GAAY,gBAAZ;AACD;;4BACD2B,uDAAwB,CAEvB;;;;;;;;;;;;;;;;;;;MCLUC,iBAAAA;WACJxE,2BAAU;AACf,aAAO,YAAP;AACD;;AACD,oBAAaC,WAAb,EAA0B;AAAA;;AACxB,WAAK2C,IAAL,GAAY,gBAAZ;AACD;;;;;;;;;;;;;MCTS6B;;;;;;;;;;;;;;;;;;;;;;;;;AAGL,MAAIC,8CAAmB,kCAC5B,8BAAO,CAAC,yBAAD,CAAP,CAD4B,EAE5B,gCAAS,EAAChF,MAAM,SAAP,EAAkBiF,cAAc,KAAhC,EAAT,CAF4B,EAG5BC,EAH4B;AAAA;AAAA;AAAA;;AAAA,qBAI5BC,cAJ4B,2BAIZC,QAJY,EAIF;AACxB,UAAIA,QAAJ,EAAc;AACZL,kBAAU9C,KAAV;AACD,OAFD,MAEO;AACL8C,kBAAUM,IAAV;AACD;AACF,KAV2B;;AAAA;AAAA,MAAvB;;;;;;;;;;;;;;;;MCDMC,cAAAA;AACX,mBAAe;AAAA;;AACb,WAAK3B,KAAL,GAAaG,OAAOC,YAAP,CAAoBwB,OAApB,CAA4B,eAAO/C,SAAnC,CAAb;AACA,UAAI,KAAKgD,WAAL,EAAJ,EAAwB;AACtB,aAAKC,IAAL,GAAYC,KAAKC,KAAL,CAAW7B,OAAO8B,IAAP,CAAY,KAAKjC,KAAL,CAAWkC,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAZ,CAAX,CAAZ;AACD,OAFD,MAEO;AACL,aAAKJ,IAAL,GAAY,IAAZ;AACD;AACF;;kBAED/B,qBAAMC,OAAO;AACXG,aAAOC,YAAP,CAAoB+B,OAApB,CAA4B,eAAOtD,SAAnC,EAA8CkD,KAAKK,SAAL,CAAepC,KAAf,CAA9C;AACA,WAAKA,KAAL,GAAaG,OAAOC,YAAP,CAAoBwB,OAApB,CAA4B,eAAO/C,SAAnC,CAAb;AACA,WAAKiD,IAAL,GAAYC,KAAKC,KAAL,CAAW7B,OAAO8B,IAAP,CAAY,KAAKjC,KAAL,CAAWkC,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAZ,CAAX,CAAZ;AACD;;kBAEDG,2BAAU;AACRlC,aAAOC,YAAP,CAAoBkC,UAApB,CAA+B,eAAOzD,SAAtC;AACA,WAAKmB,KAAL,GAAa,IAAb;AACA,WAAK8B,IAAL,GAAY,IAAZ;AACD;;kBAEDD,qCAAe;AACb,aAAO1B,OAAOC,YAAP,CAAoBwB,OAApB,CAA4B,eAAO/C,SAAnC,MAAkD,IAAzD;AACD;;kBAED0D,qCAAe;AACb,UAAI,CAAC,KAAKV,WAAV,EAAuB;AACrB,eAAO,IAAP;AACD,OAFD,MAEO;AACL,eAAO,KAAKC,IAAL,CAAU5C,QAAjB;AACD;AACF;;kBAEDsD,iCAAa;AACX,UAAI,CAAC,KAAKX,WAAV,EAAuB;AACrB,eAAO,IAAP;AACD,OAFD,MAEO;AACL,eAAO,KAAKC,IAAL,CAAUW,GAAjB;AACD;AACF;;kBAEDnC,qCAAe;AACb,UAAI,CAAC,KAAKuB,WAAL,EAAL,EAAyB;AACvB,eAAO,SAAP;AACD,OAFD,MAEO;AACL,YAAIa,OAAO,KAAKZ,IAAL,CAAUa,QAArB;AACA,gBAAQD,IAAR;AACE,eAAK,GAAL;AACE,mBAAO,SAAP;AACF,eAAK,GAAL;AACE,mBAAO,OAAP;AACF,eAAK,GAAL;AACE,mBAAO,OAAP;AANJ;AAQA,eAAO,SAAP;AACD;AACF","file":"app-bundle.js","sourcesContent":["import { Redirect } from 'aurelia-router'\nimport { Auth } from 'services/auth'\n\n\nexport class App {\n  configureRouter (config, router) {\n    config.title = 'UFPS Training Center'\n    config.options.pushState = true\n    config.options.root = '/'\n    config.addPipelineStep('authorize', AuthorizeStep)\n    config.map([\n      // Login\n      {\n        name: 'login',\n        route: 'iniciar-sesion',\n        moduleId: './modules/login/login',\n        title: 'Iniciar Sesión',\n        layoutView: './layouts/not-logged.html',\n        settings: {\n          roles: ['visitor']\n        }\n      },\n      // Signin\n      {\n        name: 'signin',\n        route: 'registro',\n        moduleId: './modules/signin/signin',\n        title: 'Regístrate',\n        layoutView: './layouts/not-logged.html',\n        settings: {\n          roles: ['visitor']\n        }\n      },\n      // Recovery Password\n      {\n        name: 'recovery-password',\n        route: 'recuperar-password',\n        moduleId: './modules/recovery/recovery-password',\n        title: 'Recuperar Contraseña',\n        layoutView: './layouts/not-logged.html',\n        settings: {\n          roles: ['visitor']\n        }\n      },\n      // Reset Password\n      {\n        name: 'reset-password',\n        route: 'cambiar-password',\n        moduleId: './modules/recovery/reset-password',\n        title: 'Recuperar Contraseña',\n        layoutView: './layouts/not-logged.html',\n        settings: {\n          roles: ['visitor']\n        }\n      },\n      // Home\n      {\n        name: 'home',\n        route: '',\n        moduleId: './modules/home/home',\n        settings: {\n          roles: ['admin', 'coach', 'student']\n        }\n      }\n    ])\n    this.router = router\n  }\n}\n\nclass AuthorizeStep {\n  static inject () {\n    return [Auth]\n  }\n\n  constructor (authService) {\n    this.authService = authService\n  }\n  run (navigationInstruction, next) {\n    if (navigationInstruction.getAllInstructions().some(i => i.config.settings.roles.indexOf('admin') !== -1)) {\n      if (this.authService.isAdmin()) {\n        return next()\n      }\n    }\n    if (navigationInstruction.getAllInstructions().some(i => i.config.settings.roles.indexOf('coach') !== -1)) {\n      if (this.authService.isCoach()) {\n        return next()\n      }\n    }\n    if (navigationInstruction.getAllInstructions().some(i => i.config.settings.roles.indexOf('student') !== -1)) {\n      if (this.authService.isStudent()) {\n        return next()\n      }\n    }\n\n    if (navigationInstruction.getAllInstructions().some(i => i.config.settings.roles.indexOf('visitor') !== -1)) {\n      if (!this.authService.isVisitor()) {\n        return next.cancel(new Redirect(''))\n      } else {\n        return next()\n      }\n    }\n    if (this.authService.isVisitor()) {\n      return next.cancel(new Redirect('iniciar-sesion'))\n    } else {\n      return next.cancel(new Redirect(''))\n    }\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment'\nimport 'fetch'\n\n// Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n})\n\nexport function configure (aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources')\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging()\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing')\n  }\n\n  aurelia.start().then(() => aurelia.setRoot())\n}\n","export let CONFIG = {\n  // API\n  apiUrl: 'http://demo9817161.mockable.io/',\n  endponts: {\n    auth: 'auth'\n  },\n\n  // SESSION\n  tokenName: 'Authorization'\n}\n","/**\n * Modelo que define los usuarios que utilizan la aplicación\n * @class User\n */\nexport class User {\n  /**\n   * Crea una instancia del tipo usuario, al iniciar sesión o registrarse.\n   * @param {string} [email=null]\n   * @param {string} [password=null]\n   * @param {string} [repassword=null]\n   * @param {string} [name=null]\n   * @param {string} [username=null]\n   * @param {number} [code=null]\n   */\n  constructor (email = null, password = null, repassword = null, name = null, username = null, code = null) {\n    this.email = email\n    this.password = password\n    this.repassword = repassword\n    this.name = name\n    this.username = username\n    this.code = code\n  }\n}\n","export function configure (config) {\n  config.globalResources(['./elements/loading-indicator'])\n}\n","import { Http } from 'services/http'\nimport { CONFIG } from 'config/config'\nimport { Router } from 'aurelia-router'\nimport { Jwt } from 'services/jwt'\n\nexport class Auth extends Http {\n\n  static inject () {\n    return [Router, Jwt]\n  }\n\n  constructor (router, jwtService) {\n    super()\n    this.router = router\n    this.jwtService = jwtService\n  }\n  auth (user) {\n    this.httpClient\n      .fetch(CONFIG.endponts.auth, {\n        method: 'post',\n        body: user\n      })\n      .then((response) => response.json())\n      .then((authorization) => {\n        this.jwtService.save(authorization.token)\n        this.router.navigate('')\n      })\n  }\n\n  logout () {\n    window.localStorage[CONFIG.tokenName] = null\n    this.authorization = null\n  }\n\n  isAuthenticated () {\n    return this.authorization !== null\n  }\n\n  isStudent () {\n    return this.jwtService.getUserType() === 'student'\n  }\n\n  isCoach () {\n    return this.jwtService.getUserType() === 'coach'\n  }\n\n  isAdmin () {\n    return this.jwtService.getUserType() === 'admin'\n  }\n\n  isVisitor () {\n    return this.jwtService.getUserType() === 'visitor'\n  }\n}\n","import { HttpClient } from 'aurelia-fetch-client'\nimport { CONFIG } from 'config/config'\nimport 'fetch'\n\nexport class Http {\n\n  constructor () {\n    this.httpClient = new HttpClient()\n    this.httpClient.configure(config => {\n      config\n        .useStandardConfiguration()\n        .withBaseUrl(CONFIG.apiUrl)\n    })\n  }\n}\n","export class Error404 {\n\n}\n","\nexport class Home {\n\n}\n","import { User } from 'models/user'\nimport { Auth } from 'services/auth'\n\nexport class Login {\n  static inject () {\n    return [Auth]\n  }\n  constructor (authorizationService) {\n    this.authorizationService = authorizationService\n    this.user = new User()\n  }\n  login () {\n    if (this.user.email !== '' && this.user.password !== '') {\n      this.authorizationService.auth(this.user)\n    }\n  }\n}\n","export class RecoveryPassword {\n  constructor () {\n    this.email = ''\n  }\n\n  requestRecovery () {\n\n  }\n}\n","import { User } from 'models/user'\n\nexport class ResetPassword {\n  constructor () {\n    this.user = new User()\n  }\n  requestResetPassword () {\n\n  }\n}\n","import { User } from 'models/user'\nimport { Auth } from 'services/auth'\n\nexport class Signin {\n  static inject () {\n    return [Auth]\n  }\n  constructor (authService) {\n    this.user = new User()\n  }\n}\n","import * as nprogress from 'nprogress'\nimport {bindable, noView, decorators} from 'aurelia-framework'\n\nexport let LoadingIndicator = decorators(\n  noView(['nprogress/nprogress.css']),\n  bindable({name: 'loading', defaultValue: false})\n).on(class {\n  loadingChanged (newValue) {\n    if (newValue) {\n      nprogress.start()\n    } else {\n      nprogress.done()\n    }\n  }\n})\n","import { CONFIG } from 'config/config'\n\nexport class Jwt {\n  constructor () {\n    this.token = window.localStorage.getItem(CONFIG.tokenName)\n    if (this.tokenExists()) {\n      this.data = JSON.parse(window.atob(this.token.split('.')[1]))\n    } else {\n      this.data = null\n    }\n  }\n\n  save (token) {\n    window.localStorage.setItem(CONFIG.tokenName, JSON.stringify(token))\n    this.token = window.localStorage.getItem(CONFIG.tokenName)\n    this.data = JSON.parse(window.atob(this.token.split('.')[1]))\n  }\n\n  remove () {\n    window.localStorage.removeItem(CONFIG.tokenName)\n    this.token = null\n    this.data = null\n  }\n\n  tokenExists () {\n    return window.localStorage.getItem(CONFIG.tokenName) !== null\n  }\n\n  getUsername () {\n    if (!this.tokenExists) {\n      return null\n    } else {\n      return this.data.username\n    }\n  }\n\n  getUserId () {\n    if (!this.tokenExists) {\n      return null\n    } else {\n      return this.data.sub\n    }\n  }\n\n  getUserType () {\n    if (!this.tokenExists()) {\n      return 'visitor'\n    } else {\n      let type = this.data.usertype\n      switch (type) {\n        case '0':\n          return 'student'\n        case '1':\n          return 'coach'\n        case '2':\n          return 'admin'\n      }\n      return 'visitor'\n    }\n  }\n}\n"],"sourceRoot":"../src"}