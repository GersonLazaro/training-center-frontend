<template>
  <require from="../../../resources/attributes/tooltip"></require>
  <div class="container ufps-container-logged">
    <h1 class="text-right">${category}</h1>
    <hr>
    <div class="col-sm-6 text-left">
      Mostrar
      <div class="dropdown dropdown-inline ufps-dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="showNoItems" data-toggle="dropdown" aria-haspopup="true"
          aria-expanded="true">
          ${noProblemsToShow}
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu ufps-dropdown-menu dropdown-mini" aria-labelledby="showNoItems">
          <li>
            <a click.delegate="setNoProblemsToShow(3)">3</a>
          </li>
          <li>
            <a click.delegate="setNoProblemsToShow(7)">7</a>
          </li>
          <li>
            <a click.delegate="setNoProblemsToShow(11)">11</a>
          </li>
          <li>
            <a click.delegate="setNoProblemsToShow(15)">15</a>
          </li>
        </ul>
      </div>
      materiales
    </div>
    <div class="col-sm-6 text-right">
      Ordenar por
      <div class="dropdown dropdown-inline ufps-dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="sortBy" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
          ${sortDisplay}
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu ufps-dropdown-menu dropdown-mini" aria-labelledby="sortBy">
          <li>
            <a click.delegate="setSort('Id')">Id</a>
          </li>
          <li>
            <a click.delegate="setSort('Nombre')">Nombre</a>
          </li>
        </ul>
      </div>
      en forma
      <div class="dropdown dropdown-inline ufps-dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="orderBy" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
          ${byDisplay}
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu ufps-dropdown-menu dropdown-mini" aria-labelledby="orderBy">
          <li>
            <a click.delegate="setBy('Ascendente')">Ascendente</a>
          </li>
          <li>
            <a click.delegate="setBy('Descendente')">Descendente</a>
          </li>
        </ul>
      </div>
    </div>
    <div repeat.for="material of materials" class="col-xs-12 col-sm-6 col-lg-3 ufps-card-container">
      <a route-href="route: specificMaterial; params.bind: {id:material.id}">
        <div class="ufps-card">
          <div class="ufps-card-title ufps-card-material">
            <span if.bind="authService.isAdmin()" class="ufps-edit-category glyphicon glyphicon-pencil" data-toggle="tooltip" title="Editar este material"
              tooltip></span>
            <span if.bind="authService.isAdmin()" class="ufps-remove-category glyphicon glyphicon-remove" data-toggle="tooltip" title="Eliminar este material"
              tooltip></span>
            <h1>${material.name}</h1>
          </div>
        </div>
      </a>
    </div>
    <div if.bind="authService.authenticated" class="col-xs-12 col-sm-6 col-lg-3 ufps-card-new ufps-card-container">
      <div class="ufps-card" data-toggle="modal" data-target="#new-material">
        <div class="ufps-card-title">
          <h1>
            <span class="glyphicon glyphicon-plus"></span>
          </h1>
        </div>
        <div class="col-xs-12 ufps-card-link">
          Subir material
        </div>
        <div class="fix"></div>
      </div>
    </div>
    <div class="fix"></div>
    <nav aria-label="Navegación" class="text-center">
      <ul class="pagination">
        <li class="${page === 1 ? 'disabled' : ''}">
          <a click.delegate="goToFirstPage()" aria-label="Primero">
            <span aria-hidden="true">Inicio</span>
          </a>
        </li>
        <li class="${page === 1 ? 'disabled' : ''}">
          <a click.delegate="goToPrevPage()" aria-label="Anterior">
            <span aria-hidden="true">Anterior</span>
          </a>
        </li>
        <li repeat.for="i of pagination" class="${i === page ? 'active' : ''}">
          <a click.delegate="goToPage(i)">${i}</a>
        </li>
        <li class="${page === totalPages ? 'disabled' : ''}">
          <a click.delegate="goToNextPage()" aria-label="Siguiente">
            <span aria-hidden="true">Siguiente</span>
          </a>
        </li>
        <li class="${page === totalPages ? 'disabled' : ''}">
          <a click.delegate="goToLastPage()" aria-label="Último">
            <span aria-hidden="true">Final</span>
          </a>
        </li>
      </ul>
    </nav>
  </div>
  <!--MODAL PARA AÑADIR MATERIAL-->
  <div if.bind="authService.authenticated" class="modal fade" id="new-material" tabindex="-1" role="dialog" aria-labelledby="new-material">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title">Añadir material</h4>
          <br>
          <form submit.delegate="createMaterial()">
            <input type="text" class="form-control" placeholder="Nombre" value.bind="newMaterial.name" required>
            <br>
            <input type="text" class="form-control" placeholder="Descripcion" value.bind="newMaterial.description">
            <br>
            <label for="selectType">Tipo:</label>
            <input type="radio" name="selectType" checked.bind="newMaterial.isPdf" model.bind="true"> PDF
            <input type="radio" name="selectType" checked.bind="newMaterial.isPdf" model.bind="false"> URL
            <br>
            <input if.bind="!newMaterial.isPdf" type="text" class="form-control" placeholder="Url" value.bind="newMaterial.url">
            <input if.bind="newMaterial.isPdf" type="file" class="form-control" files.bind="newMaterial.pdf" accept=".pdf">
            <br>
            <p class="text-center" if.bind="authService.isStudent()">Aparecerá en la plataforma una vez sea aprobado por un administrador.</p>
            <input type="submit" class="btn btn-default ufps-btn-default" value="Añadir">
          </form>
        </div>
      </div>
    </div>
  </div>
</template>
