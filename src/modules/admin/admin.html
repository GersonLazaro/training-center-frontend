<template>
  <div slot="content" class="body-slot">
    
    <div class="container" if.bind="authService.isAdmin()">
      <h1 class="text-right">Usuarios</h1>
      <hr>
      <p class="text-center">Desde esta sección puede añadir docentes (coachs) o administradores. Los estudiantes pueden crear sus propias cuentas
        desde la página inicial.</p>
      <form submit.delegate="createUser()">
        <div class="text-center">
          <label class="radio-inline">
            <input type="radio" name="type-user" checked.bind="newUser.type" model.bind="2" required> Administrador
          </label>
          <label class="radio-inline">
            <input type="radio" name="type-user" checked.bind="newUser.type" model.bind="1" required> Coach o docente
          </label>
        </div>
        <br>
        <div class="form-horizontal col-md-6">
          <div class="form-group">
            <div class="form-group">
              <label class="control-label col-sm-3" for="new-user-name">Nombre:</label>
              <div class="col-sm-9 input-group ufps-input-creator">
                <input type="text" class="form-control" id="new-user-name" value.bind="newUser.name" required>
                <span class="input-group-addon" tooltip data-toggle="tooltip" title="Nombre completo del usuario">
                  <span class="glyphicon glyphicon-question-sign"></span>
                </span>
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-3" for="new-user-email">Email:</label>
              <div class="col-sm-9 input-group ufps-input-creator">
                <input type="email" class="form-control" id="new-user-email" value.bind="newUser.email" required>
                <span class="input-group-addon" tooltip data-toggle="tooltip" title="Email del usuario">
                  <span class="glyphicon glyphicon-question-sign"></span>
                </span>
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-3" for="new-user-password">Contraseña:</label>
              <div class="col-sm-9 input-group ufps-input-creator">
                <input type="password" class="form-control" id="new-user-password" value.bind="newUser.password" required>
                <span class="input-group-addon" tooltip data-toggle="tooltip" title="Contraseña del usuario">
                  <span class="glyphicon glyphicon-question-sign"></span>
                </span>
              </div>
            </div>
          </div>
        </div>
        <div class="form-horizontal col-md-6">
          <div class="form-group">
            <div class="form-group">
              <label class="control-label col-sm-3" for="new-user-name">Código:</label>
              <div class="col-sm-9 input-group ufps-input-creator">
                <input type="number" class="form-control" id="new-user-code" value.bind="newUser.code">
                <span class="input-group-addon" tooltip data-toggle="tooltip" title="Código del usuario en la Universidad">
                  <span class="glyphicon glyphicon-question-sign"></span>
                </span>
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-3" for="new-user-username">Username:</label>
              <div class="col-sm-9 input-group ufps-input-creator">
                <input type="text" class="form-control" id="new-user-username" value.bind="newUser.username">
                <span class="input-group-addon" tooltip data-toggle="tooltip" title="Nickname del usuario (sin espacios)">
                  <span class="glyphicon glyphicon-question-sign"></span>
                </span>
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-3" for="new-user-password">Contraseña:</label>
              <div class="col-sm-9 input-group ufps-input-creator">
                <input type="password" class="form-control" id="new-user-password" value.bind="newUser.confirmPassword" required>
                <span class="input-group-addon" tooltip data-toggle="tooltip" title="Repite la contraseña">
                  <span class="glyphicon glyphicon-question-sign"></span>
                </span>
              </div>
            </div>
          </div>
        </div>
        <div class="text-center">
          <input type="submit" class="btn ufps-btn-submit" value="Crear usuario">
        </div>
      </form>
      <h1 class="text-right">Materiales</h1>
      <hr>
      <p class="text-center">Los siguientes materiales han sido añadidos por estudiantes. Para que aparezcan en la plataforma, deben ser aprobados
        por un administrador.</p>
      <div class="col-sm-6 text-left">
        Mostrar
        <div class="dropdown dropdown-inline ufps-dropdown">
          <button class="btn btn-default dropdown-toggle" type="button" id="showNoItems" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="true">
            ${noProblemsToShow}
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu ufps-dropdown-menu dropdown-mini" aria-labelledby="showNoItems">
            <li>
              <a click.delegate="setNoProblemsToShow(10)">10</a>
            </li>
            <li>
              <a click.delegate="setNoProblemsToShow(15)">15</a>
            </li>
            <li>
              <a click.delegate="setNoProblemsToShow(20)">20</a>
            </li>
          </ul>
        </div>
        materiales
      </div>
      <div class="col-sm-6 text-right">
        Ordenar por
        <div class="dropdown dropdown-inline ufps-dropdown">
          <button class="btn btn-default dropdown-toggle" type="button" id="sortBy" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
            ${sortDisplay}
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu ufps-dropdown-menu dropdown-mini" aria-labelledby="sortBy">
            <li>
              <a click.delegate="setSort('Id')">Id</a>
            </li>
            <li>
              <a click.delegate="setSort('Nombre')">Nombre</a>
            </li>
          </ul>
        </div>
        en forma
        <div class="dropdown dropdown-inline ufps-dropdown">
          <button class="btn btn-default dropdown-toggle" type="button" id="orderBy" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
            ${byDisplay}
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu ufps-dropdown-menu dropdown-mini" aria-labelledby="orderBy">
            <li>
              <a click.delegate="setBy('Ascendente')">Ascendente</a>
            </li>
            <li>
              <a click.delegate="setBy('Descendente')">Descendente</a>
            </li>
          </ul>
        </div>
      </div>
      <table>
        <thead>
          <tr>
            <th class="text-center">Id</th>
            <th class="text-center">Nombre</th>
            <th class="text-center">Categoría</th>
            <th class="text-center">Acción</th>
          </tr>
        </thead>
        <tbody>
          <tr repeat.for="material of materials">
            <td class="text-center">${material.id}</td>
            <td>${material.name}</td>
            <td>${material.categoryString}</td>
            <td class="text-right">
              <a class="ufps-btn btn ufps-btn-default" href="${material.url}" target="blank">Abrir</a>
              <button class="ufps-btn btn ufps-btn-default" click.delegate="approveMaterial(material.id)">Aprobar</button>
              <button class="ufps-btn btn ufps-btn-default" click.delegate="showRemoveMaterial(material.id)">Descartar</button>
            </td>
          </tr>
          <tr if.bind="materials.length === 0">
            <td></td>
            <td>No hay materiales pendientes de aprobación.</td>
            <td>
            </td>
            <td>
            </td>
          </tr>
        </tbody>
      </table>
      <nav aria-label="Navegación" class="text-center">
        <ul class="pagination">
          <li class="${page === 1 ? 'disabled' : ''}">
            <a click.delegate="goToFirstPage()" aria-label="Primero">
              <span aria-hidden="true">Inicio</span>
            </a>
          </li>
          <li class="${page === 1 ? 'disabled' : ''}">
            <a click.delegate="goToPrevPage()" aria-label="Anterior">
              <span aria-hidden="true">Anterior</span>
            </a>
          </li>
          <li repeat.for="i of pagination" class="${i === page ? 'active' : ''}">
            <a click.delegate="goToPage(i)">${i}</a>
          </li>
          <li class="${page === totalPages ? 'disabled' : ''}">
            <a click.delegate="goToNextPage()" aria-label="Siguiente">
              <span aria-hidden="true">Siguiente</span>
            </a>
          </li>
          <li class="${page === totalPages ? 'disabled' : ''}">
            <a click.delegate="goToLastPage()" aria-label="Último">
              <span aria-hidden="true">Final</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
    <div if.bind="authService.isAdmin()" class="modal fade" id="remove-material" tabindex="-1" role="dialog" aria-labelledby="remove-material">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header text-center">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title">¿Estás seguro de eliminar este material?</h4>
            <br>
            <p>Esta acción no puede ser revertida</p>

            <button class="btn btn-default ufps-btn-default" click.delegate=removeMaterial()>Si</button>
            <button class="btn btn-default ufps-btn-default" data-dismiss="modal" aria-label="Close">No</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
