<template>
  <require from="../../../resources/attributes/tooltip"></require>
  <div class="container ufps-container-logged">
    <h1 class="text-right">${category.name}</h1>
    <hr>
    <div class="col-sm-6 text-left">
      Mostrar
      <div class="dropdown dropdown-inline ufps-dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="showNoItems" data-toggle="dropdown" aria-haspopup="true"
          aria-expanded="true">
          ${noProblemsToShow}
          <span class="caret"></span>
          </button>
          <ul class="dropdown-menu ufps-dropdown-menu dropdown-mini" aria-labelledby="showNoItems">
            <li><a click.delegate="setNoProblemsToShow(10)">10</a></li>
            <li><a click.delegate="setNoProblemsToShow(20)">20</a></li>
            <li><a click.delegate="setNoProblemsToShow(30)">30</a></li>
            <li><a click.delegate="setNoProblemsToShow(50)">50</a></li>
          </ul>
      </div>
      problemas en
      <div class="dropdown dropdown-inline ufps-dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="showLanguage" data-toggle="dropdown" aria-haspopup="true"
          aria-expanded="true">
          ${languageDisplay}
          <span class="caret"></span>
          </button>
          <ul class="dropdown-menu ufps-dropdown-menu dropdown-mini" aria-labelledby="showLanguage">
            <li><a click.delegate="setLanguage(null, 'Cualquier idioma')">Cualquier idioma</a></li>
            <li><a click.delegate="setLanguage('es', 'español')">Español</a></li>
            <li><a click.delegate="setLanguage('en', 'ingles')">Ingles</a></li>
          </ul>
      </div>
    </div>
    <div class="col-sm-6 text-right">
      Ordenar por
      <div class="dropdown dropdown-inline ufps-dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="sortBy" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
          ${sortDisplay}
          <span class="caret"></span>
          </button>
        <ul class="dropdown-menu ufps-dropdown-menu dropdown-mini" aria-labelledby="sortBy">
          <li><a click.delegate="setSort('id', 'Id')">Id</a></li>
          <li><a click.delegate="setSort('name', 'Nombre')">Nombre</a></li>
          <li><a click.delegate="setSort('level', 'Dificultad')">Dificultad</a></li>
        </ul>
      </div>
      en forma
      <div class="dropdown dropdown-inline ufps-dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="orderBy" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
          ${byDisplay}
          <span class="caret"></span>
          </button>
        <ul class="dropdown-menu ufps-dropdown-menu dropdown-mini" aria-labelledby="orderBy">
          <li><a click.delegate="setBy('asc', 'Ascendente')">Ascendente</a></li>
          <li><a click.delegate="setBy('desc', 'Descendente')">Descendente</a></li>
        </ul>
      </div>
    </div>
    <div class="ufps-separator"></div>
    <table>
      <thead>
        <tr>
          <th class="text-center" style="width:5%">Id</th>
          <th class="text-center" style="width:70%">Problema</th>
          <th class="text-center" style="width:10%">Dificultad</th>
          <th class="text-center" style="width:15%">Idioma</th>
        </tr>
      </thead>
      <tbody>
        <tr repeat.for="problem of category.problemsLoaded">
          <td class="text-center">${problem.id}</td>
          <td class="text-left ufps-td-problem">
            <p if.bind="problem.isInEnglish()" class="ufps-name-problem-list"><a  route-href="route: view-problem; params.bind: {id:problem.id, lang:'en'}">${problem.titleEN}</a></p>
            <p if.bind="!problem.isInEnglish()" class="ufps-name-problem-list"><a  route-href="route: view-problem; params.bind: {id:problem.id, lang:'es'}">${problem.titleES}</a></p>
            <a route-href="route: edit-problem; params.bind: {id:problem.id}"><span if.bind="authService.isAdmin()" class="ufps-edit-problem-list glyphicon glyphicon-pencil" data-toggle="tooltip" title="Editar problema" tooltip></span></a>
            <span if.bind="authService.isAdmin()" class="ufps-edit-problem-list glyphicon glyphicon-remove"  data-toggle="tooltip" title="Eliminar problema" click.delegate="showRemoveProblem(problem.id)" tooltip></span>
          </td>
          <td class="text-center">${problem.level}</td>
          <td class="text-center ufps-language"><span class="${problem.isInSpanish() ? 'active' : 'inactive'}"><a  route-href="route: view-problem; params.bind: {id:problem.id, lang:'es'}">ES</a></span> | <span class="${problem.isInEnglish() ? 'active' : 'inactive'}"><a  route-href="route: view-problem; params.bind: {id:problem.id, lang: 'en'}">EN</a></span></td>
        </tr>
      </tbody>
    </table>
    <nav aria-label="Navegación" class="text-center">
      <ul class="pagination">
        <li class="${page === 1 ? 'disabled' : ''}">
          <a click.delegate = "goToFirstPage()" aria-label="Primero">
            <span aria-hidden="true">Inicio</span>
          </a>
        </li>
        <li class="${page === 1 ? 'disabled' : ''}">
          <a click.delegate = "goToPrevPage()" aria-label="Anterior">
            <span aria-hidden="true">Anterior</span>
          </a>
        </li>
        <li repeat.for="i of pagination" class="${i === page ? 'active' : ''}"><a click.delegate = "goToPage(i)">${i}</a></li>
        <li class="${page === totalPages ? 'disabled' : ''}">
          <a click.delegate = "goToNextPage()" aria-label="Siguiente">
            <span aria-hidden="true">Siguiente</span>
          </a>
        </li>
        <li class="${page === totalPages ? 'disabled' : ''}">
          <a click.delegate = "goToLastPage()" aria-label="Último">
            <span aria-hidden="true">Final</span>
          </a>
        </li>
      </ul>
    </nav>
  </div>

  <!--MODAL PARA ELIMINAR PROBLEMA-->
  <div if.bind = "authService.isAdmin()" class="modal fade" id="remove-problem" tabindex="-1" role="dialog" aria-labelledby="remove-problem">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header text-center">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title">¿Estás seguro de eliminar este problema?</h4>
          <br>
          <p>Esta acción no puede ser revertida</p>
          
          <button class="btn btn-default ufps-btn-default" click.delegate=removeProblem()>Si</button>
          <button class="btn btn-default ufps-btn-default" data-dismiss="modal" aria-label="Close">No</button>
        </div>
      </div>
    </div>
  </div>
</template>
